{"ast":null,"code":"import _defineProperty from \"/Users/david.lozzi/git/dansDiet/web/node_modules/@babel/runtime/helpers/esm/defineProperty\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(source, true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(source).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport axios from 'axios';\nexport const API_MYDIET_PENDING = 'API_MYDIET_PENDING';\nexport const API_MYDIET_SUCCESS = 'API_MYDIET_SUCCESS';\nexport const API_MYDIET_FAILURE = 'API_MYDIET_FAILURE';\nexport const name = 'mydiet';\nconst sources = [];\nconst initialState = {\n  data: {},\n  loading: false,\n  error: false,\n  errorMessage: ''\n};\nexport const selectors = {\n  getData: state => state[name].data\n};\nexport const actions = {\n  getDiet: url => async dispatch => {\n    const newSource = axios.CancelToken.source();\n    sources.push(newSource);\n    dispatch({\n      type: API_MYDIET_PENDING\n    });\n\n    try {\n      const response = await axios.get(url, {\n        cancelToken: newSource.token\n      });\n      dispatch({\n        type: API_MYDIET_SUCCESS,\n        payload: response\n      });\n    } catch (error) {\n      dispatch({\n        type: API_MYDIET_FAILURE,\n        payload: error.message\n      });\n    }\n  }\n};\nexport function reducer(state = initialState, action) {\n  switch (action.type) {\n    case API_MYDIET_PENDING:\n      return _objectSpread({}, state, {\n        loading: true,\n        error: false,\n        errorMessage: ''\n      });\n\n    case API_MYDIET_FAILURE:\n      return _objectSpread({}, state, {\n        loading: false,\n        error: true,\n        errorMessage: action.payload\n      });\n\n    case API_MYDIET_SUCCESS:\n      return _objectSpread({}, state, {\n        loading: false,\n        error: false,\n        data: action.payload\n      });\n\n    default:\n      return state;\n  }\n}","map":{"version":3,"sources":["/Users/david.lozzi/git/dansDiet/web/src/redux/api/myDiet/myDiet.js"],"names":["axios","API_MYDIET_PENDING","API_MYDIET_SUCCESS","API_MYDIET_FAILURE","name","sources","initialState","data","loading","error","errorMessage","selectors","getData","state","actions","getDiet","url","dispatch","newSource","CancelToken","source","push","type","response","get","cancelToken","token","payload","message","reducer","action"],"mappings":";;;;;;AAAA,OAAOA,KAAP,MAAkB,OAAlB;AAEA,OAAO,MAAMC,kBAAkB,GAAG,oBAA3B;AACP,OAAO,MAAMC,kBAAkB,GAAG,oBAA3B;AACP,OAAO,MAAMC,kBAAkB,GAAG,oBAA3B;AAEP,OAAO,MAAMC,IAAI,GAAG,QAAb;AAEP,MAAMC,OAAO,GAAG,EAAhB;AACA,MAAMC,YAAY,GAAG;AACnBC,EAAAA,IAAI,EAAE,EADa;AAEnBC,EAAAA,OAAO,EAAE,KAFU;AAGnBC,EAAAA,KAAK,EAAE,KAHY;AAInBC,EAAAA,YAAY,EAAE;AAJK,CAArB;AAOA,OAAO,MAAMC,SAAS,GAAG;AACvBC,EAAAA,OAAO,EAAEC,KAAK,IAAIA,KAAK,CAACT,IAAD,CAAL,CAAYG;AADP,CAAlB;AAIP,OAAO,MAAMO,OAAO,GAAG;AACrBC,EAAAA,OAAO,EAAEC,GAAG,IAAI,MAAOC,QAAP,IAAoB;AAClC,UAAMC,SAAS,GAAGlB,KAAK,CAACmB,WAAN,CAAkBC,MAAlB,EAAlB;AACAf,IAAAA,OAAO,CAACgB,IAAR,CAAaH,SAAb;AAEAD,IAAAA,QAAQ,CAAC;AAAEK,MAAAA,IAAI,EAAErB;AAAR,KAAD,CAAR;;AAEA,QAAI;AACF,YAAMsB,QAAQ,GAAG,MAAMvB,KAAK,CAACwB,GAAN,CAAUR,GAAV,EAAe;AAAES,QAAAA,WAAW,EAAEP,SAAS,CAACQ;AAAzB,OAAf,CAAvB;AACAT,MAAAA,QAAQ,CAAC;AAAEK,QAAAA,IAAI,EAAEpB,kBAAR;AAA4ByB,QAAAA,OAAO,EAAEJ;AAArC,OAAD,CAAR;AACD,KAHD,CAGE,OAAOd,KAAP,EAAc;AACdQ,MAAAA,QAAQ,CAAC;AAAEK,QAAAA,IAAI,EAAEnB,kBAAR;AAA4BwB,QAAAA,OAAO,EAAElB,KAAK,CAACmB;AAA3C,OAAD,CAAR;AACD;AACF;AAboB,CAAhB;AAgBP,OAAO,SAASC,OAAT,CAAiBhB,KAAK,GAAGP,YAAzB,EAAuCwB,MAAvC,EAA+C;AACpD,UAAQA,MAAM,CAACR,IAAf;AACE,SAAKrB,kBAAL;AACE,+BACKY,KADL;AAEEL,QAAAA,OAAO,EAAE,IAFX;AAGEC,QAAAA,KAAK,EAAE,KAHT;AAIEC,QAAAA,YAAY,EAAE;AAJhB;;AAMF,SAAKP,kBAAL;AACE,+BACKU,KADL;AAEEL,QAAAA,OAAO,EAAE,KAFX;AAGEC,QAAAA,KAAK,EAAE,IAHT;AAIEC,QAAAA,YAAY,EAAEoB,MAAM,CAACH;AAJvB;;AAMF,SAAKzB,kBAAL;AACE,+BACKW,KADL;AAEEL,QAAAA,OAAO,EAAE,KAFX;AAGEC,QAAAA,KAAK,EAAE,KAHT;AAIEF,QAAAA,IAAI,EAAEuB,MAAM,CAACH;AAJf;;AAMF;AACE,aAAOd,KAAP;AAvBJ;AAyBD","sourcesContent":["import axios from 'axios';\n\nexport const API_MYDIET_PENDING = 'API_MYDIET_PENDING';\nexport const API_MYDIET_SUCCESS = 'API_MYDIET_SUCCESS';\nexport const API_MYDIET_FAILURE = 'API_MYDIET_FAILURE';\n\nexport const name = 'mydiet';\n\nconst sources = [];\nconst initialState = {\n  data: {},\n  loading: false,\n  error: false,\n  errorMessage: ''\n};\n\nexport const selectors = {\n  getData: state => state[name].data\n};\n\nexport const actions = {\n  getDiet: url => async (dispatch) => {\n    const newSource = axios.CancelToken.source();\n    sources.push(newSource);\n\n    dispatch({ type: API_MYDIET_PENDING });\n\n    try {\n      const response = await axios.get(url, { cancelToken: newSource.token });\n      dispatch({ type: API_MYDIET_SUCCESS, payload: response });\n    } catch (error) {\n      dispatch({ type: API_MYDIET_FAILURE, payload: error.message });\n    }\n  }\n};\n\nexport function reducer(state = initialState, action) {\n  switch (action.type) {\n    case API_MYDIET_PENDING:\n      return {\n        ...state,\n        loading: true,\n        error: false,\n        errorMessage: ''\n      };\n    case API_MYDIET_FAILURE:\n      return {\n        ...state,\n        loading: false,\n        error: true,\n        errorMessage: action.payload\n      };\n    case API_MYDIET_SUCCESS:\n      return {\n        ...state,\n        loading: false,\n        error: false,\n        data: action.payload\n      };\n    default:\n      return state;\n  }\n}\n"]},"metadata":{},"sourceType":"module"}